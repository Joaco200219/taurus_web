---
import ProductCard from './ProductCard.astro';

export interface Props {
  id: string;
  category: string;
  emoji: string;
  categoryKey: string;
  products: Array<{
    id: string;
    nombre: string;
    descripcion: string;
    precio: number;
    imagen: string;
    badge?: string | null;
    categoria?: string;
  }>;
}

const { id, category, categoryKey, products } = Astro.props;

// Strip emoji from category for the big display title
const categoryName = category.split(' ').slice(1).join(' ');
---

<section id={id} class="mb-10">

  <!-- Category header â€” brutalista retro -->
  <div class="px-4 mb-4">
    <div
      class="flex items-center justify-between px-4 py-2"
      style="background: #0D0D0D; border: 2px solid #0D0D0D; box-shadow: 3px 3px 0px #E8681A;"
    >
      <h2
        style="font-family: 'Bebas Neue', sans-serif; font-size: 1.6rem; color: #F5F0E8; line-height: 1; letter-spacing: 0.04em;"
      >
        {category}
      </h2>
      <!-- Count badge -->
      <span
        style="font-family: 'Bebas Neue', sans-serif; font-size: 1.1rem; background: #E8681A; color: #0D0D0D; padding: 0 8px; line-height: 1.6;"
      >
        {products.length}
      </span>
    </div>
  </div>

  <!-- Product list -->
  <div class="flex flex-col gap-3 px-4">
    {products.map((product) => (
      <ProductCard
        id={product.id}
        nombre={product.nombre}
        descripcion={product.descripcion}
        precio={product.precio}
        imagen={product.imagen}
        badge={product.badge}
        categoria={product.categoria || categoryKey}
      />
    ))}
  </div>
</section>
