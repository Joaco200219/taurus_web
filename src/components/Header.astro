---
// Header â€” Retro Disruptivo | Branco Burgers
// TODO: Confirmar horarios reales con el cliente
const SHIFT_1_START = { h: 11, m: 0  };
const SHIFT_1_END   = { h: 15, m: 0  };
const SHIFT_2_START = { h: 19, m: 0  };
const SHIFT_2_END   = { h: 25, m: 0  };
---

<header
  class="theme-header sticky top-0 z-50 w-full"
>
  <div class="max-w-4xl mx-auto px-3 py-2">

    <div class="flex items-center gap-3">

      <!-- Logo con borde negro duro estilo sticker -->
      <div class="relative flex-shrink-0">
        <div
          class="w-16 h-16 rounded-full overflow-hidden flex items-center justify-center"
          style="border: 2.5px solid #0D0D0D; box-shadow: 3px 3px 0px #E8681A;"
        >
          <img
            src="/logo.png"
            alt="Branco Burgers"
            class="w-full h-full object-cover"
            onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';"
          />
          <!-- Fallback -->
          <div
            class="w-full h-full items-center justify-center text-xl font-bold"
            style="display: none; background: #E8681A; color: #0D0D0D; font-family: 'Bebas Neue', sans-serif;"
          >
            B
          </div>
        </div>
      </div>

      <!-- Nombre y eslogan -->
      <div class="flex flex-col leading-none justify-center min-w-0 flex-1">
        <span
          style="font-family: 'Bebas Neue', sans-serif; color: #0D0D0D; font-size: clamp(1.4rem, 6vw, 2rem); line-height: 1; letter-spacing: 0.02em;"
        >
          <span style="color: #E8681A;">BRANCO</span> BURGERS
        </span>
        <span style="font-family: 'Inter', sans-serif; color: #6B6660; font-size: clamp(0.5rem, 2vw, 0.65rem); font-weight: 700; letter-spacing: 0.12em; text-transform: uppercase; margin-top: 2px;">
          HAMBURGUESAS ARTESANALES
        </span>
      </div>

      <!-- Badge Abierto/Cerrado -->
      <div
        id="hours-badge"
        class="flex-shrink-0 flex items-center gap-1 px-2 py-1 font-bold"
        style="background: #0D0D0D; color: #4CAF50; border: 2px solid #0D0D0D; font-size: 0.65rem; font-family: 'Inter', sans-serif; font-weight: 800; box-shadow: 2px 2px 0px #E8681A; letter-spacing: 0.05em;"
      >
        <span id="hours-dot" class="w-1.5 h-1.5 rounded-full animate-pulse flex-shrink-0" style="background: #4CAF50;"></span>
        <span id="hours-label">ABIERTO</span>
      </div>
    </div>

  </div>
</header>

<script>
  const SHIFT_1_START = { h: 11, m: 0  };
  const SHIFT_1_END   = { h: 15, m: 0  };
  const SHIFT_2_START = { h: 19, m: 0  };
  const SHIFT_2_END   = { h: 25, m: 0  };

  function isOpen(): boolean {
    const now = new Date();
    const totalMins = now.getHours() * 60 + now.getMinutes();
    const s1Start = SHIFT_1_START.h * 60 + SHIFT_1_START.m;
    const s1End   = SHIFT_1_END.h   * 60 + SHIFT_1_END.m;
    const s2Start = SHIFT_2_START.h * 60 + SHIFT_2_START.m;
    const s2End   = SHIFT_2_END.h   * 60 + SHIFT_2_END.m;
    const extendedMins = totalMins < 2 * 60 ? totalMins + 24 * 60 : totalMins;
    return (totalMins >= s1Start && totalMins <= s1End) ||
           (extendedMins >= s2Start && extendedMins <= s2End);
  }

  function updateBadge() {
    const badge = document.getElementById('hours-badge');
    const dot   = document.getElementById('hours-dot');
    const label = document.getElementById('hours-label');
    if (!badge || !dot || !label) return;

    if (isOpen()) {
      badge.style.background = '#0D0D0D';
      badge.style.color = '#4CAF50';
      badge.style.boxShadow = '2px 2px 0px #E8681A';
      dot.style.background = '#4CAF50';
      label.textContent = 'ABIERTO';
    } else {
      badge.style.background = '#E8681A';
      badge.style.color = '#0D0D0D';
      badge.style.boxShadow = '2px 2px 0px #0D0D0D';
      dot.style.background = '#0D0D0D';
      dot.classList.remove('animate-pulse');
      label.textContent = 'CERRADO';
    }
  }

  updateBadge();
  setInterval(updateBadge, 60_000);
</script>
